<div class="container-fluid content">
  <div class="row">
    <div class="col">
    <div class="calendar">
      <div class="month">
        <i class="prev"><</i>
        <div class="date">
          <h1></h1>
          <p></p>
        </div>
        <i class="next">></i>
      </div>
      <div class="weekdays">
        <div>Sun</div>
        <div>Mon</div>
        <div>Tue</div>
        <div>Wed</div>
        <div>Thu</div>
        <div>Fri</div>
        <div>Sat</div>
      </div>
      <div class="days"></div>
    </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <button class="show-modal"><i class="fas fa-plus"></i>&nbsp;Add Events</button>
    </div>
  </div>

</div>
<div class="my_modal hidden">
    <button class="close_my_modal">&times;</button>
      <h1>I'm a modal window ğŸ˜</h1>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
        commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
        velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
        occaecat cupidatat non proident, sunt in culpa qui officia deserunt
        mollit anim id est laborum.
      </p>
    </div>
  </div>
  <div class="overlay hidden"></div>



<script>
  'use strict';

  const date = new Date();

  const prevBtn = document.querySelector(".prev");
  const nextBtn = document.querySelector(".next");


  //ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦
  const showModal = document.querySelector(".show-modal");
  const modal = document.querySelector(".my_modal");
  const overlay = document.querySelector(".overlay");
  const btnCloseModal = document.querySelector(`.close_my_modal`);
ã€€//ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
  const openModal = function () {
    modal.classList.remove("hidden");
    overlay.classList.remove("hidden");
  }
  //ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
  const closeModal = function() {
    modal.classList.add("hidden");
    overlay.classList.add("hidden");
  }

ã€€//ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
  const renderCalendar = function() {

    date.setDate(1);

    const monthDays = document.querySelector('.days');

    const lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();

    const prevLastDay = new Date(date.getFullYear(), date.getMonth(), 0).getDate();
    //å‰ã®æœˆã®æœ€çµ‚æ—¥ã‚’å–å¾—ã™ã‚‹

    const firstDayIndex = date.getDay();
    //firstDayIndex = 0 means that first day of this month is on Monday

    const lastDayIndex = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDay();
    // lastDayIndex = 3 means that last day of this month is on Wednesday.

    const nextDays = 7 - lastDayIndex - 1;
    // ä»Šæœˆã®æœ€çµ‚æ—¥ã®æ›œæ—¥ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹lastDayIndexã‹ã‚‰ï¼—ã‚’å¼•ãã€
    //ï¼‘ã‚’å¼•ãã¨æ¬¡ã®æœˆã®æœ€åˆã®é€±ã®æ—¥ä»˜ï¼ˆä»Šæœˆåˆ†ã«è¡¨ç¤ºã™ã‚‹ï¼‰ã®æ•°ã‚’å–å¾—ã§ãã‚‹

    const months = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "Decempber",
      ]

    document.querySelector('.date h1').innerHTML
    = months[date.getMonth()];
    //date.getMonth() ç¾åœ¨ã®æœˆã‚’å–å¾—ã™ã‚‹

    document.querySelector('.date p').innerHTML
    = date.toDateString();
    //date.toDateString ç¾åœ¨ã®å¹´æœˆæ—¥æ›œæ—¥ã‚’è‹±èªã§ç©ºç™½åŒºåˆ‡ã‚Šã§å–å¾—ã™ã‚‹

    let days = "";

    for(let x = firstDayIndex; x > 0; x--){
      // ä»Šæœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ã€å‰ã®æœˆã®æœ€çµ‚é€±ã®æ—¥ä»˜ã‚’è¿½åŠ ã—ãŸã„
      // æœ€çµ‚é€±ã®æ—¥ã«ã¡ã®æ•°ã¯ã€ä»Šæœˆã®1æ—¥ãŒã©ã®æ›œæ—¥ã«ä½ç½®ã™ã‚‹ã‹ã§å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
      // prevLastDayï¼ˆ7æœˆ31æ—¥ï¼‰ã‹ã‚‰firstDayIndexï¼ˆï¼‘=æœˆæ›œæ—¥ï¼‰ã‚’å¼•ãã€
      // å–å¾—ã§ãã‚‹å€¤ï¼ˆï¼“ï¼ï¼‰ã«firstDayIndexï¼ˆï¼‘ï¼‰ã‚’è¶³ã™ã“ã¨ã§ã€å‰ã®æœˆã®æœ€çµ‚é€±ã®æ—¥ä»˜ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
      days += `<div class="prev-date ${prevLastDay - x + 1}">${prevLastDay - x + 1}</div>`
      // daysï¼ˆä»Šæœˆã®æ—¥ä»˜ï¼‰ã«è¶³ã™
    }

    for (let i = 1; i <= lastDay; i++) {
      if(i === new Date().getDate() && date.getMonth() === new Date().getMonth()) {
        days += `<div class="today this-days ${i}">${i}</div>`;
      } else {
        days += `<div class="this-days" id="this-days--${i}">${i}</div>`;
      }
    }

    for (let j = 1; j <= nextDays; j++) {
      days += `<div class="next-date ${j}">${j}</div>`
    }
    monthDays.innerHTML = days;

  };

  //å‰ã®æœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹
  prevBtn.addEventListener('click', function() {
    date.setMonth(date.getMonth() - 1);
    renderCalendar();
  });
ã€€ //æ¬¡ã®æœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹
  nextBtn.addEventListener('click', function() {
    date.setMonth(date.getMonth() + 1);
    renderCalendar();
  });

  renderCalendar();

  showModal.addEventListener('click', openModal);
  btnCloseModal.addEventListener('click', closeModal);
  overlay.addEventListener('click', closeModal);

</script>
